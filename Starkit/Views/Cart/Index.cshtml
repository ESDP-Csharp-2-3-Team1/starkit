@model object

@{
    ViewBag.Title = "Корзина";
    Layout = "_BusinessCardLayout";
}

<h3 class="text-cart">Корзина</h3>
<div style="overflow-x: auto">
    <table class="table table-bordered">
        <thead>
        <tr>
            <th class="cart-cell">Наименования</th>
            <th class="cart-cell">Картинка</th>
            <th class="cart-cell">Цена</th>
            <th class="cart-cell">Действие</th>
            <th class="cart-cell">Количество</th>
            <th class="cart-cell">Общая стоимость</th>
        </tr>
        </thead>
        <tbody id="result"></tbody>
    </table>
</div>
<div id="dish-details"></div>
<br>
<div style="display: flex; justify-content: space-between">
    <a asp-controller="Site" asp-action="index">Назад</a>
    <a href="#">Оформить заказ</a>
</div>
@section Scripts
{
    <script >
        $(document).ready(function (){
           $.get('@Url.Action("GetContentCard")', function (data){
               $("#result").html(data);
           }) 
        });
        
        function down(id, qty, name){
            if (qty > 0){
                $.get(`@Url.Action("ChangeQuantity")?id=${id}&quantity=${qty}&name=${name}`, function (data){
                    $("#result").html(data);
                })   
            }
        }
        
        function up(id, qty, name){
            $.get(`@Url.Action("ChangeQuantity")?id=${id}&quantity=${qty}&name=${name}`, function (data){
                $("#result").html(data);
            })
        }
        
        function dishDetails(id){
            $.get(`@Url.Action("Details", "Dishes")/?id=${id}`, function(data) {
                $('#dish-details').html(data);
                $("#modal-details").show();
                $("#modal-details").css("overflow", "auto");
                $("body").css("overflow", "hidden");
            })
        }
        
        function closeModal() {
            $(".modal").hide();
            $("body").css("overflow", "auto");
        }
    </script>
}
